<Ui>
  <Button name="BaganatorRetailTabButtonTemplate" virtual="true" inherits="PanelTabButtonTemplate">
    <Scripts>
      <OnShow>
        PanelTemplates_TabResize(self, 30, nil, 20)
        PanelTemplates_DeselectTab(self)
      </OnShow>
    </Scripts>
  </Button>

  <Button name="BaganatorClassicTabButtonTemplate" virtual="true" inherits="CharacterFrameTabButtonTemplate">
    <Scripts>
      <OnShow>
        PanelTemplates_TabResize(self, 30, nil, 20)
        PanelTemplates_DeselectTab(self)
      </OnShow>
    </Scripts>
  </Button>

  <Frame name="BaganatorCachedBagLayoutTemplate" virtual="true" mixin="BaganatorCachedBagLayoutMixin">
    <Scripts>
      <OnLoad method="OnLoad"/>
    </Scripts>
  </Frame>

  <Frame name="BaganatorLiveBagLayoutTemplate" virtual="true" mixin="BaganatorLiveBagLayoutMixin">
    <Scripts>
      <OnLoad method="OnLoad"/>
      <OnEvent method="OnEvent"/>
    </Scripts>
  </Frame>

  <Frame name="BaganatorBagDividerTemplate" virtual="true">
    <Anchors>
      <Anchor point="TOPLEFT"/>
      <Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT"/>
    </Anchors>
    <Scripts>
      <OnLoad>
        if Baganator.Constants.IsRetail then
          self.Divider:SetAtlas("activities-divider", true)
        else
          self.Divider:SetTexture("Interface\\Common\\UI-TooltipDivider")
          self.Divider:ClearAllPoints()
          self.Divider:SetHeight(15)
          self.Divider:SetPoint("LEFT", 0, -8)
          self.Divider:SetPoint("RIGHT")
        end
      </OnLoad>
    </Scripts>
    <Layers>
      <Layer level="BACKGROUND">
        <Texture parentKey="Divider">
          <Anchors>
            <Anchor point="TOPLEFT" y="10"/>
            <Anchor point="TOPRIGHT" y="10"/>
          </Anchors>
        </Texture>
      </Layer>
    </Layers>
  </Frame>

  <Button name="BaganatorCustomiseButtonTemplate" virtual="true" inherits="UIPanelButtonTemplate">
    <Size x="32" y="22"/>
    <Layers>
      <Layer level="ARTWORK">
        <Texture file="Interface\WorldMap\Gear_64">
          <TexCoords left="0.5" top="0" right="0" bottom="0.5"/>
          <Size x="19" y="19"/>
          <Anchors>
            <Anchor point="CENTER"/>
          </Anchors>
        </Texture>
      </Layer>
    </Layers>
    <Scripts>
      <OnClick>
        Baganator.CallbackRegistry:TriggerEvent("ShowCustomise")
      </OnClick>
    </Scripts>
  </Button>

  <Frame name="BaganatorMainViewTemplate" virtual="true" hidden="true" topLevel="true" enableMouse="true" inherits="ButtonFrameTemplate" mixin="BaganatorMainViewMixin">
    <Scripts>
      <OnLoad method="OnLoad"/>
      <OnEvent method="OnEvent"/>
      <OnDragStart method="OnDragStart"/>
      <OnDragStop method="OnDragStop"/>
    </Scripts>
    <Frames>
      <Frame parentKey="CharacterSelect" inherits="BaganatorCharacterSelectSidebarTemplate" hidden="true">
        <Anchors>
          <Anchor point="RIGHT" relativePoint="LEFT"/>
        </Anchors>
      </Frame>
      <Button parentKey="CustomiseButton" inherits="BaganatorCustomiseButtonTemplate" frameLevel="700">
        <Anchors>
          <Anchor point="RIGHT" relativeKey="$parent.CloseButton" relativePoint="LEFT"/>
        </Anchors>
      </Button>
      <Button parentKey="SortButton" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_SORT" frameLevel="700" hidden="true">
        <Anchors>
          <Anchor point="RIGHT" relativeKey="$parent.CustomiseButton" relativePoint="LEFT"/>
        </Anchors>
        <Scripts>
          <OnClick>
            C_Container.SortBags()
          </OnClick>
        </Scripts>
      </Button>
      <Button parentKey="ToggleBankButton" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_BANK" frameLevel="700">
        <Scripts>
          <OnClick>
            self:GetParent():ToggleBank()
          </OnClick>
        </Scripts>
      </Button>
      <EditBox parentKey="SearchBox" inherits="SearchBoxTemplate" autoFocus="false" frameLevel="700">
        <Size x="300" y="22"/>
        <Anchors>
          <Anchor point="RIGHT" x="-13" y="0"/>
        </Anchors>
      </EditBox>
      <Button parentKey="ToggleReagentsButton" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_REAGENTS">
        <Scripts>
          <OnClick>
            self:GetParent():ToggleReagents()
          </OnClick>
        </Scripts>
      </Button>
      <Button parentKey="ToggleReagentsBankButton" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_REAGENTS">
        <Scripts>
          <OnClick>
            self:GetParent():ToggleReagents()
          </OnClick>
        </Scripts>
      </Button>
      <Button parentKey="ToggleAllCharacters" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_ALL_CHARACTERS">
        <Anchors>
          <Anchor point="BOTTOM" y="2"/>
        </Anchors>
        <Scripts>
          <OnClick>
            self:GetParent():ToggleCharacterSidebar()
          </OnClick>
        </Scripts>
      </Button>

      <Frame parentKey="BagLive" inherits="BaganatorLiveBagLayoutTemplate"/>
      <Frame parentKey="ReagentBagLive" inherits="BaganatorLiveBagLayoutTemplate">
        <Anchors>
          <Anchor point="TOPLEFT" relativeKey="$parent.BagLive" relativePoint="BOTTOMLEFT" y="-38"/>
        </Anchors>
        <Frames>
          <Frame inherits="BaganatorBagDividerTemplate"/>
        </Frames>
      </Frame>
      <Frame parentKey="BankLive" inherits="BaganatorLiveBagLayoutTemplate"/>
      <Frame parentKey="ReagentBankLive" inherits="BaganatorLiveBagLayoutTemplate">
        <Anchors>
          <Anchor point="TOPLEFT" relativeKey="$parent.BankLive" relativePoint="BOTTOMLEFT" y="-38"/>
        </Anchors>
        <Frames>
          <Frame inherits="BaganatorBagDividerTemplate"/>
        </Frames>
      </Frame>

      <Frame parentKey="BagCached" inherits="BaganatorCachedBagLayoutTemplate"/>

      <Frame parentKey="ReagentBagCached" inherits="BaganatorCachedBagLayoutTemplate">
        <Anchors>
          <Anchor point="TOPLEFT" relativeKey="$parent.BagCached" relativePoint="BOTTOMLEFT" y="-38"/>
        </Anchors>
        <Frames>
          <Frame inherits="BaganatorBagDividerTemplate"/>
        </Frames>
      </Frame>

      <Frame parentKey="BankCached" inherits="BaganatorCachedBagLayoutTemplate"/>
      <Frame parentKey="ReagentBankCached" inherits="BaganatorCachedBagLayoutTemplate">
        <Anchors>
          <Anchor point="TOPLEFT" relativeKey="$parent.BankCached" relativePoint="BOTTOMLEFT" y="-38"/>
        </Anchors>
        <Frames>
          <Frame inherits="BaganatorBagDividerTemplate"/>
        </Frames>
      </Frame>
    </Frames>
    <Layers>
      <Layer level="BACKGROUND">
        <FontString parentKey="Money" inherits="NumberFontNormal">
          <Anchors>
            <Anchor point="BOTTOMRIGHT" x="-15" y="6"/>
          </Anchors>
        </FontString>
      </Layer>
    </Layers>
  </Frame>

  <Frame name="BaganatorBankOnlyViewTemplate" virtual="true" hidden="true" topLevel="true" enableMouse="true" inherits="ButtonFrameTemplate" mixin="BaganatorBankOnlyViewMixin">
    <Scripts>
      <OnLoad method="OnLoad"/>
      <OnEvent method="OnEvent"/>
      <OnShow method="OnShow"/>
      <OnHide method="OnHide"/>
      <OnDragStart method="OnDragStart"/>
      <OnDragStop method="OnDragStop"/>
    </Scripts>
    <Frames>
      <Button parentKey="CustomiseButton" inherits="BaganatorCustomiseButtonTemplate" frameLevel="700">
        <Anchors>
          <Anchor point="RIGHT" relativeKey="$parent.CloseButton" relativePoint="LEFT"/>
        </Anchors>
      </Button>
      <Button parentKey="SortButton" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_SORT" frameLevel="700" hidden="true">
        <Anchors>
          <Anchor point="RIGHT" relativeKey="$parent.CustomiseButton" relativePoint="LEFT"/>
        </Anchors>
        <Scripts>
          <OnClick>
            C_Container.SortBankBags()
            C_Timer.After(1, function()
              C_Container.SortReagentBankBags()
            end)
          </OnClick>
        </Scripts>
      </Button>
      <Frame parentKey="BankLive" inherits="BaganatorLiveBagLayoutTemplate">
        <Anchors>
          <Anchor point="TOPLEFT" x="13" y="-50"/>
        </Anchors>
      </Frame>
      <Frame parentKey="ReagentBankLive" inherits="BaganatorLiveBagLayoutTemplate">
        <Anchors>
          <Anchor point="TOPLEFT" relativeKey="$parent.BankLive" relativePoint="BOTTOMLEFT" y="-38"/>
        </Anchors>
        <Frames>
          <Frame inherits="BaganatorBagDividerTemplate"/>
        </Frames>
      </Frame>

      <EditBox parentKey="SearchBox" inherits="SearchBoxTemplate" autoFocus="false" frameLevel="700">
        <Size x="300" y="22"/>
        <Anchors>
          <Anchor point="BOTTOMLEFT" relativeKey="$parent.BankLive" relativePoint="TOPLEFT" x="5"/>
        </Anchors>
      </EditBox>
      <Button parentKey="ToggleReagentsBankButton" inherits="UIPanelDynamicResizeButtonTemplate" text="BAGANATOR_L_REAGENTS">
        <Scripts>
          <OnClick>
            self:GetParent():ToggleReagents()
          </OnClick>
        </Scripts>
        <Anchors>
          <Anchor point="TOPLEFT" relativeKey="$parent.BankLive" relativePoint="BOTTOMLEFT" x="-2" y="-5"/>
        </Anchors>
      </Button>
    </Frames>
  </Frame>
</Ui>
